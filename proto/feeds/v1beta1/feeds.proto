syntax = "proto3";
package feeds.v1beta1;

option go_package = "github.com/bandprotocol/chain/v2/x/feeds/types";

import "cosmos_proto/cosmos.proto";
import "gogoproto/gogo.proto";

// Signal is the data structure that contains signal id and power of that signal.
message Signal {
  option (gogoproto.equal) = true;

  // ID is the id of the signal.
  string id = 1 [(gogoproto.customname) = "ID"];

  // Power is the power of the corresponding signal id.
  int64 power = 2;
}

// DelegatorSignals is the data structure that contains array of signals of a delegator.
message DelegatorSignals {
  // Delegator is the address of the delegator of this signals.
  string delegator = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];

  // Signals is a list of signals submit by the delegator.
  repeated Signal signals = 2 [(gogoproto.nullable) = false];
}

// Feed is a structure that holds a signal id, its total power, and its calculated interval.
message Feed {
  option (gogoproto.equal) = true;

  // SignalID is the unique string that identifies the unit of feed.
  string signal_id = 1 [(gogoproto.customname) = "SignalID"];

  // Power is the power of the corresponding feed.
  int64 power = 2;

  // Interval is the interval of the price feed.
  int64 interval = 3;

  // LastIntervalUpdateTimestamp is the timestamp of the last time interval is updated.
  int64 last_interval_update_timestamp = 4;

  // DeviationInThousandth is the maximum deviation value the feed can tolerate, expressed in thousandths.
  int64 deviation_in_thousandth = 5;
}

// PriceOption is a structure that defines the price option of a price.
enum PriceOption {
  option (gogoproto.goproto_enum_prefix) = false;

  // PRICE_OPTION_UNSPECIFIED is an unspecified price option.
  PRICE_OPTION_UNSPECIFIED = 0 [(gogoproto.enumvalue_customname) = "PriceOptionUnspecified"];

  // PRICE_OPTION_UNSUPPORTED is an unsupported price option.
  PRICE_OPTION_UNSUPPORTED = 1 [(gogoproto.enumvalue_customname) = "PriceOptionUnsupported"];

  // PRICE_OPTION_UNAVAILABLE is an unavailable price option.
  PRICE_OPTION_UNAVAILABLE = 2 [(gogoproto.enumvalue_customname) = "PriceOptionUnavailable"];

  // PRICE_OPTION_AVAILABLE is an available price option.
  PRICE_OPTION_AVAILABLE = 3 [(gogoproto.enumvalue_customname) = "PriceOptionAvailable"];
}

// Price is a structure that defines the price of a signal id.
message Price {
  option (gogoproto.equal) = true;

  // PriceOption is the price option of a signal id.
  PriceOption price_option = 1;

  // SignalID is the signal id of the price.
  string signal_id = 2 [(gogoproto.customname) = "SignalID"];

  // Price is the price of the signal id.
  uint64 price = 3;

  // Timestamp is the timestamp at which the price was aggregated.
  int64 timestamp = 4;
}

// SubmitPrice is a structure that defines the submit price of a signal id.
message SubmitPrice {
  option (gogoproto.equal) = true;

  // PriceOption is the price option of a signal id.
  PriceOption price_option = 1;

  // SignalID is the signal id of the price.
  string signal_id = 2 [(gogoproto.customname) = "SignalID"];

  // Price is the price submitted by the validator.
  uint64 price = 3;
}

// PriceValidator is a structure that defines the price submitted by a validator for a signal id.
message PriceValidator {
  option (gogoproto.equal) = true;

  // PriceOption is the price option of a price submitted.
  PriceOption price_option = 1;

  // Validator is the validator address.
  string validator = 2;

  // SignalID is the signal id of the price.
  string signal_id = 3 [(gogoproto.customname) = "SignalID"];

  // Price is the price submitted by the validator.
  uint64 price = 4;

  // Timestamp is the timestamp at which the price was submitted.
  int64 timestamp = 5;
}

// PriceService is a structure that defines the information of price service.
message PriceService {
  option (gogoproto.equal) = true;

  // Hash is the hash of the price service.
  string hash = 1;

  // Version is the version of the price service.
  string version = 2;

  // Url is the URL of the price service.
  string url = 3;
}
